<p-sidebar [(visible)]="display" position="right" [style]="{width:'30em'}">
  <form [formGroup]="searchForm" dir="rtl">
    <div class="container">
      <div class="row">
        <strong>
          <p>خيارات البحث :</p>
        </strong>
        <hr>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>أين يتم البحث</p>
        </div>
        <div class="col-sm-8">
          <p-dropdown appendTo="body" [options]="searchSites" optionLabel="name" optionValue="value"
            [virtualScrollItemSize]="30" placeholder="يتم البحث في..." (onChange)="checkSearchSite($event)">
          </p-dropdown>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>الاسم الاول</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="firstName" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>الكنية</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="lastName" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>اسم الاب</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="fatherName" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>اسم الام</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="motherName" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>الاسم الكامل</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="fullName" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>اللقب</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="surName" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>الرقم الوطني</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="nationalID" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>الرقم العسكري</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="militaryID" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>تاريخ الولادة</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="bitrthPlaceDate" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>الساحة</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="square" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>المدينة</p>
        </div>
        <div class="col-sm-8">
          <p-dropdown appendTo="body" [options]="searchSites" optionLabel="name" optionValue="value"
            formControlName="city" [virtualScrollItemSize]="30" placeholder="اختر المدينة"
            (onChange)="checkSearchSite($event)"></p-dropdown>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>القرية</p>
        </div>
        <div class="col-sm-8">
          <p-dropdown appendTo="body" [options]="searchSites" optionLabel="name" optionValue="value"
            formControlName="town" [virtualScrollItemSize]="30" placeholder="اختر القرية"
            (onChange)="checkSearchSite($event)"></p-dropdown>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>المكان</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="place" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>العنوان</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="address" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>العنوان الدائم</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="persistentAddress" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>المهنة</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="job" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>الملاحظات</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="observation" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>رقم الهاتف</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="phone" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>الجوال</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="mobile" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>ينتمي إلى</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="belongTo" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>الموظف المنشئ</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="rowCreatedUserName" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>تاريخ الانشاء</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="rowCreatedDate" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>الموظف المعدل</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="rowUpdatdedUserName" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>تاريخ التعديل</p>
        </div>
        <div class="col-sm-8">
          <input type="text" pInputText formControlName="rowUpdatedDate" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 center">
          <p>الجنسية</p>
        </div>
        <div class="col-sm-8">
          <p-dropdown appendTo="body" [options]="searchSites" optionLabel="name" optionValue="value"
            formControlName="nationality" [virtualScrollItemSize]="30" placeholder="اختر الجنسية"
            (onChange)="checkSearchSite($event)"></p-dropdown>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <p-button class="search-btn" type="text" (click)="search(searchForm.value)" label="بحث"></p-button>
        </div>
      </div>
    </div>
  </form>
</p-sidebar>

<p-card>
  <ng-template pTemplate="header">
    <div class="main">
      <p>يرجى الاختيار من خيارات البحث لعرض النتائج</p>
      <p-button type="text" (click)="displaySearchBar()" label="خيارات البحث"></p-button>
    </div>
  </ng-template>

  <p-table [value]="persons" dataKey="name" dir="rtl" responsiveLayout="scroll">
    <ng-template pTemplate="header">
      <tr>
        <th style="width: 3rem"></th>
        <th>الاسم</th>
        <th>اسم الام</th>
        <th>الرقم الوطني</th>
        <th>تاريخ الميلاد</th>
        <th>المدينة</th>
        <th>الملاحظات</th>
        <th>الجوال</th>
        <th>الانتماء</th>
        <th>الجنسية</th>
        <!-- <th></th> -->
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-person let-expanded="expanded">
      <tr>
        <td>
          <button type="button" pButton pRipple [pRowToggler]="person"
            class="p-button-text p-button-rounded p-button-plain"
            [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-left'"></button>
        </td>
        <td>{{person.firstName}} {{person.fatherName}} {{person.lastName}}</td>
        <td>{{person.motherName}}</td>
        <td>{{person.nationalID}}</td>
        <td>{{person.bitrthPlaceDate | date: 'dd/MM/yyyy'}}</td>
        <td>{{person.city}}</td>
        <td>{{person.observation}}</td>
        <td>{{person.mobile}}</td>
        <td>{{person.belongTo}}</td>
        <td>{{person.nationality}}</td>
        <!-- <td>

          <ol type="number">
            <li *ngFor="let doc of person.IncumbentForInSearchs">
              {{doc.incumbent_No}}
              {{doc.incumbent_Date}}
              {{doc.incumbent_No}}
              {{doc.incumbent_Note}}
              {{doc.incumbent_Reason}}
              {{doc.incumbent_Source}}
              {{doc.incumbent_Type}}
            </li>
          </ol>
        </td> -->
      </tr>
    </ng-template>
    <ng-template pTemplate="rowexpansion" let-person>
      <tr>
        <td colspan="7">
          <div class="p-3">
            <p-table [value]="person.IncumbentForInSearchs" dataKey="id">
              <ng-template pTemplate="header">
      <tr>
        <th style="width: 3rem"></th>
        <th>تاريخ السجل</th>
        <th>رقم السجل</th>
        <th>ملاحظات السجل</th>
        <th>سبب السجل</th>
        <th>مصدر السجل</th>
        <th>نوع السجل</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-doc>
      <tr>
        <td>
          <p-checkbox #checkElm name="groupname" value="{{doc.dossier_ID}}" (onChange)="selectDoc(checkElm.value ,selectedDocs)" [(ngModel)]="selectedDocs"></p-checkbox>
        </td>
        <td>{{doc.incumbent_Date | date: 'dd/MM/yyyy'}}</td>
        <td>{{doc.incumbent_No}}</td>
        <td>{{doc.incumbent_Note}}</td>
        <td>{{doc.incumbent_Reason}}</td>
        <td>{{doc.incumbent_Source}}</td>
        <td>{{doc.incumbent_Type}}</td>
      </tr>
    </ng-template>
    <ng-template pTemplate="footer">
      <tr>
        <td colspan="7">
          <div class="row">
            <button (click)="mergeDocs()" pButton type="button" label="دمج السجلات المحددة"></button>
          </div>
        </td>
      </tr>

    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="6">There are no order for this product yet.</td>
      </tr>
    </ng-template>
  </p-table>
  </div>
  </td>
  </tr>
  </ng-template>
  </p-table>

  <!-- <ng-template pTemplate="footer">
      Footer content here
  </ng-template> -->
</p-card>